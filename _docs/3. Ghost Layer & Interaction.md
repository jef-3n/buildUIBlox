# **Design Guidance: 3\. Ghost Layer & Interaction**

## **1\. Purpose**

Details the execution of the "Invisible Interface." It maps visual coordinates to the logical event protocol, ensuring interaction is decoupled from the DOM.

## **2\. Architecture & Data Consumption**

Consumes the **Metadata** of the currently active Bloc to render bounding boxes and hotspots.

* **Context Subscription:** Subscribes to compiledBloc.ghostMap and data.activeSelection.  
* **Data Structure:**  
  {  
    "ghostMap": \[  
      { "id": "hotspot\_1", "rect": { "x": 0, "y": 0, "w": 100, "h": 50 }, "emitter": "NAV\_TO" }  
    \]  
  }

## **3\. Events & Handlers**

| Event Type | Payload Schema | Handler Description |
| :---- | :---- | :---- |
| GHOST\_HOTSPOT\_TRIGGER | { type: string, payload: any } | The primary bridge. Translates a raw click on a Ghost rectangle into a standardized system event. |
| GHOST\_SELECT\_ELEMENT | { path: string, rect: DOMRect } | Updates the global activeSelection so the Inspector can populate data. |
| GHOST\_RESIZE\_FRAME | { frameId: string, delta: object } | Manages the manual adjustment of grid-area boundaries via the Ghost Layer handles. |

## **4\. Architectural Rules**

1. **Z-Index Authority:** The Ghost Layer must always sit at z-index: 9999 with pointer-events: auto.  
2. **Coordinate Stability:** All coordinates must be calculated relative to the Bloc's grid origin, not the browser window, to survive scaling (1X-5X).