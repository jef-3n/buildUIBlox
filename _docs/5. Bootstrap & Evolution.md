# **Design Guidance: 5\. Bootstrap & Evolution**

## **1\. Purpose**

Defines the "Self-Hosting" transition plan. It specifies how the hard-coded Host becomes a consumer of its own output.

## **2\. Architecture & Data Consumption**

Consumes the **View Factory Manifest** and the **System Component Library**.

* **Context Subscription:** Subscribes to /system/components/builder-ui/.  
* **Data Structure:**  
  {  
    "bootstrap": {  
      "isSelfHosting": bool,  
      "activeRegistry": "local | remote"  
    }  
  }

## **3\. Events & Handlers**

| Event Type | Payload Schema | Handler Description |
| :---- | :---- | :---- |
| BOOTSTRAP\_LOAD\_CORE | { componentId: string, targetSlot: string } | Commands the View Factory to replace a hard-coded Host drawer with a nuwaBloc version. |
| BOOTSTRAP\_REGISTER\_PRIMITIVE | { name: string, schema: object } | Adds a new low-level building block (e.g., a custom slider) to the Builder's internal library. |
| BOOTSTRAP\_FULL\_CLOSURE | {} | The "Point of No Return" event that switches the entire IDE to self-hosted mode. |

## **4\. Architectural Rules**

1. **Slot-Based Replacement:** The Host must provide \<slot name="drawer-left"\> placeholders to allow seamless transition from Lit-Hardcoded to Bloc-Rendered content.  
2. **Fallback Logic:** If a nuwaBloc fails to load during bootstrap, the Host must automatically revert to the hard-coded "Standard" UI to prevent bricking the IDE.